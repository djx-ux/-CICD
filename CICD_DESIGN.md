# ğŸš€ CI/CD æµæ°´çº¿è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ é¡¹ç›®æŠ€æœ¯æ ˆ

- **å‰ç«¯**: Vue 3 + Vite + Element Plus + pnpm
- **åç«¯**: Go + Gin Framework
- **æ•°æ®åº“**: MySQL 8.0 + Redis 6.0
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **ç¼–æ’**: Kubernetes (K8s)
- **é•œåƒä»“åº“**: é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ (registry.cn-hangzhou.aliyuncs.com)

## ğŸ¯ CI/CD æµç¨‹è®¾è®¡

### å®Œæ•´æµç¨‹å›¾

```
å¼€å‘è€…æäº¤ä»£ç 
    â†“
[Git Push]
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             CI é˜¶æ®µ (æŒç»­é›†æˆ)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ä»£ç æ£€æŸ¥ (Lint)                                  â”‚
â”‚    â”œâ”€ å‰ç«¯: ESLint                                  â”‚
â”‚    â””â”€ åç«¯: golangci-lint                           â”‚
â”‚                                                      â”‚
â”‚ 2. å•å…ƒæµ‹è¯• (Test)                                  â”‚
â”‚    â”œâ”€ å‰ç«¯: Vitest                                  â”‚
â”‚    â””â”€ åç«¯: go test                                 â”‚
â”‚                                                      â”‚
â”‚ 3. å®‰å…¨æ‰«æ (Security)                              â”‚
â”‚    â”œâ”€ ä¾èµ–æ‰«æ: npm audit / go mod verify          â”‚
â”‚    â””â”€ ä»£ç æ‰«æ: Trivy / Snyk                       â”‚
â”‚                                                      â”‚
â”‚ 4. æ„å»ºé•œåƒ (Build)                                 â”‚
â”‚    â”œâ”€ å‰ç«¯é•œåƒ: gva/web:${TAG}                     â”‚
â”‚    â””â”€ åç«¯é•œåƒ: gva/server:${TAG}                  â”‚
â”‚                                                      â”‚
â”‚ 5. æ¨é€é•œåƒ (Push)                                  â”‚
â”‚    â””â”€ æ¨é€åˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             CD é˜¶æ®µ (æŒç»­éƒ¨ç½²)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ (Dev/Staging)                      â”‚
â”‚    â”œâ”€ æ›´æ–° K8s Deployment                           â”‚
â”‚    â”œâ”€ å¥åº·æ£€æŸ¥                                       â”‚
â”‚    â””â”€ è‡ªåŠ¨åŒ–æµ‹è¯•                                     â”‚
â”‚                                                      â”‚
â”‚ 7. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ (Production) [éœ€äººå·¥å®¡æ‰¹]         â”‚
â”‚    â”œâ”€ ç°åº¦å‘å¸ƒ (Canary)                             â”‚
â”‚    â”œâ”€ æ»šåŠ¨æ›´æ–° (Rolling Update)                     â”‚
â”‚    â”œâ”€ å¥åº·æ£€æŸ¥                                       â”‚
â”‚    â””â”€ ç›‘æ§å‘Šè­¦                                       â”‚
â”‚                                                      â”‚
â”‚ 8. å›æ»šæœºåˆ¶ (Rollback)                              â”‚
â”‚    â””â”€ å‡ºç°é—®é¢˜è‡ªåŠ¨å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
éƒ¨ç½²å®Œæˆ
```

## ğŸŒ¿ åˆ†æ”¯ç­–ç•¥

### Git Flow æ¨¡å‹

```
main (master)
  â”œâ”€ ç”Ÿäº§ç¯å¢ƒä»£ç 
  â””â”€ åªæ¥å—æ¥è‡ª release åˆ†æ”¯çš„åˆå¹¶

develop
  â”œâ”€ å¼€å‘ç¯å¢ƒä»£ç 
  â””â”€ æ—¥å¸¸å¼€å‘çš„ä¸»åˆ†æ”¯

feature/*
  â”œâ”€ åŠŸèƒ½å¼€å‘åˆ†æ”¯
  â””â”€ ä» develop åˆ†å‡ºï¼Œå®Œæˆååˆå¹¶å› develop

release/*
  â”œâ”€ é¢„å‘å¸ƒåˆ†æ”¯
  â””â”€ ä» develop åˆ†å‡ºï¼Œæµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° main å’Œ develop

hotfix/*
  â”œâ”€ ç´§æ€¥ä¿®å¤åˆ†æ”¯
  â””â”€ ä» main åˆ†å‡ºï¼Œä¿®å¤ååˆå¹¶å› main å’Œ develop
```

### åˆ†æ”¯ä¸ç¯å¢ƒå¯¹åº”

| åˆ†æ”¯ | è§¦å‘æ¡ä»¶ | éƒ¨ç½²ç¯å¢ƒ | è‡ªåŠ¨éƒ¨ç½² |
|------|---------|---------|---------|
| `feature/*` | Push | ä¸éƒ¨ç½² | - |
| `develop` | Push/Merge | å¼€å‘ç¯å¢ƒ (Dev) | âœ… è‡ªåŠ¨ |
| `release/*` | Push/Merge | æµ‹è¯•ç¯å¢ƒ (Staging) | âœ… è‡ªåŠ¨ |
| `main` | Merge | ç”Ÿäº§ç¯å¢ƒ (Production) | âš ï¸ éœ€å®¡æ‰¹ |

## ğŸ”„ CI æµç¨‹è¯¦è§£

### é˜¶æ®µ1ï¼šä»£ç è´¨é‡æ£€æŸ¥ (2-3åˆ†é’Ÿ)

```yaml
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      # å‰ç«¯æ£€æŸ¥
      - name: ESLint æ£€æŸ¥
        run: cd web && pnpm lint
      
      # åç«¯æ£€æŸ¥
      - name: Go Lint æ£€æŸ¥
        run: cd server && golangci-lint run
      
      # ä»£ç æ ¼å¼æ£€æŸ¥
      - name: ä»£ç æ ¼å¼åŒ–æ£€æŸ¥
        run: |
          cd server && go fmt ./...
          cd web && pnpm format:check
```

### é˜¶æ®µ2ï¼šè‡ªåŠ¨åŒ–æµ‹è¯• (3-5åˆ†é’Ÿ)

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    services:
      mysql:
        image: mysql:8.0
      redis:
        image: redis:6.0
    steps:
      # åç«¯å•å…ƒæµ‹è¯•
      - name: Go å•å…ƒæµ‹è¯•
        run: cd server && go test -v -cover ./...
      
      # å‰ç«¯å•å…ƒæµ‹è¯•
      - name: Vue ç»„ä»¶æµ‹è¯•
        run: cd web && pnpm test:unit
      
      # ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
      - name: ä¸Šä¼ æµ‹è¯•æŠ¥å‘Š
        uses: codecov/codecov-action@v3
```

### é˜¶æ®µ3ï¼šæ„å»ºé•œåƒ (5-10åˆ†é’Ÿ)

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # æ„å»ºå‰ç«¯é•œåƒ
      - name: Build Web Image
        run: |
          cd web
          docker build -t $REPOSITORY/web:$TAG .
      
      # æ„å»ºåç«¯é•œåƒ
      - name: Build Server Image
        run: |
          cd server
          docker build -t $REPOSITORY/server:$TAG .
      
      # æ¨é€åˆ°é•œåƒä»“åº“
      - name: Push Images
        run: |
          docker push $REPOSITORY/web:$TAG
          docker push $REPOSITORY/server:$TAG
```

### é˜¶æ®µ4ï¼šéƒ¨ç½² (2-3åˆ†é’Ÿ)

```yaml
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # æ›´æ–° K8s Deployment
      - name: Deploy to Kubernetes
        run: |
          kubectl set image deployment/gva-server \
            gin-vue-admin-container=$REPOSITORY/server:$TAG
          kubectl set image deployment/gva-web \
            gva-web-container=$REPOSITORY/web:$TAG
      
      # ç­‰å¾…éƒ¨ç½²å®Œæˆ
      - name: Wait for Rollout
        run: |
          kubectl rollout status deployment/gva-server
          kubectl rollout status deployment/gva-web
      
      # å¥åº·æ£€æŸ¥
      - name: Health Check
        run: |
          curl -f http://your-domain/api/health || exit 1
```

## ğŸ¨ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ (Dev)

- **åˆ†æ”¯**: `develop`
- **å‘½åç©ºé—´**: `gva-dev`
- **åŸŸå**: `dev.yourdomain.com`
- **æ•°æ®åº“**: å¼€å‘æ•°æ®åº“
- **è‡ªåŠ¨éƒ¨ç½²**: âœ… æ˜¯
- **å›æ»š**: è‡ªåŠ¨

### æµ‹è¯•ç¯å¢ƒ (Staging)

- **åˆ†æ”¯**: `release/*`
- **å‘½åç©ºé—´**: `gva-staging`
- **åŸŸå**: `staging.yourdomain.com`
- **æ•°æ®åº“**: æµ‹è¯•æ•°æ®åº“
- **è‡ªåŠ¨éƒ¨ç½²**: âœ… æ˜¯
- **å›æ»š**: è‡ªåŠ¨

### ç”Ÿäº§ç¯å¢ƒ (Production)

- **åˆ†æ”¯**: `main`
- **å‘½åç©ºé—´**: `gva-prod`
- **åŸŸå**: `www.yourdomain.com`
- **æ•°æ®åº“**: ç”Ÿäº§æ•°æ®åº“
- **è‡ªåŠ¨éƒ¨ç½²**: âš ï¸ éœ€äººå·¥å®¡æ‰¹
- **å›æ»š**: æ‰‹åŠ¨/è‡ªåŠ¨

## ğŸ” å¯†é’¥ç®¡ç†

### éœ€è¦é…ç½®çš„å¯†é’¥ (GitHub Secrets)

```yaml
# Docker Registry
DOCKER_REGISTRY: registry.cn-hangzhou.aliyuncs.com
DOCKER_USERNAME: your-username
DOCKER_PASSWORD: your-password

# Kubernetes
KUBE_CONFIG: base64-encoded-kubeconfig
K8S_NAMESPACE_DEV: gva-dev
K8S_NAMESPACE_STAGING: gva-staging
K8S_NAMESPACE_PROD: gva-prod

# Database
DB_HOST_DEV: mysql-dev.yourdomain.com
DB_PASSWORD_DEV: dev-password
DB_HOST_PROD: mysql-prod.yourdomain.com
DB_PASSWORD_PROD: prod-password

# Redis
REDIS_HOST_DEV: redis-dev.yourdomain.com
REDIS_PASSWORD_DEV: dev-redis-password
```

## ğŸ“¦ é•œåƒæ ‡ç­¾ç­–ç•¥

```
æ ¼å¼: {branch}-{commit-sha}-{timestamp}

ç¤ºä¾‹:
- develop-abc1234-20251016150000
- release-1.0.0-def5678-20251016160000
- main-1.0.0-20251016170000

ç‰¹æ®Šæ ‡ç­¾:
- latest: æŒ‡å‘æœ€æ–°çš„ main åˆ†æ”¯æ„å»º
- stable: æŒ‡å‘æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬
```

## ğŸ”„ éƒ¨ç½²ç­–ç•¥

### 1. è“ç»¿éƒ¨ç½² (Blue-Green)

```
é€‚ç”¨åœºæ™¯: ç”Ÿäº§ç¯å¢ƒé‡å¤§æ›´æ–°
ä¼˜ç‚¹: å¯ä»¥å¿«é€Ÿå›æ»š
ç¼ºç‚¹: éœ€è¦åŒå€èµ„æº
```

### 2. æ»šåŠ¨æ›´æ–° (Rolling Update)

```
é€‚ç”¨åœºæ™¯: æ—¥å¸¸æ›´æ–°
ä¼˜ç‚¹: èŠ‚çœèµ„æºï¼Œå¹³æ»‘å‡çº§
ç¼ºç‚¹: å›æ»šè¾ƒæ…¢
```

### 3. é‡‘ä¸é›€å‘å¸ƒ (Canary)

```
é€‚ç”¨åœºæ™¯: é£é™©è¾ƒé«˜çš„åŠŸèƒ½
æµç¨‹: 
  1. éƒ¨ç½² 10% æµé‡åˆ°æ–°ç‰ˆæœ¬
  2. ç›‘æ§ 30 åˆ†é’Ÿ
  3. é€æ­¥å¢åŠ åˆ° 50%
  4. å…¨é‡å‘å¸ƒ
```

## ğŸ“Š ç›‘æ§ä¸å‘Šè­¦

### ç›‘æ§æŒ‡æ ‡

```yaml
åº”ç”¨ç›‘æ§:
  - HTTP è¯·æ±‚æˆåŠŸç‡ > 99%
  - API å“åº”æ—¶é—´ < 500ms
  - é”™è¯¯ç‡ < 0.1%

èµ„æºç›‘æ§:
  - CPU ä½¿ç”¨ç‡ < 80%
  - å†…å­˜ä½¿ç”¨ç‡ < 85%
  - ç£ç›˜ä½¿ç”¨ç‡ < 90%

ä¸šåŠ¡ç›‘æ§:
  - ç”¨æˆ·ç™»å½•æˆåŠŸç‡
  - æ•°æ®åº“è¿æ¥æ•°
  - Redis å‘½ä¸­ç‡
```

### å‘Šè­¦è§„åˆ™

```yaml
çº§åˆ«P0 (ç´§æ€¥):
  - æœåŠ¡ä¸å¯ç”¨
  - æ•°æ®åº“è¿æ¥å¤±è´¥
  - é”™è¯¯ç‡ > 5%
  â†’ ç«‹å³é€šçŸ¥ï¼Œè‡ªåŠ¨å›æ»š

çº§åˆ«P1 (é‡è¦):
  - APIå“åº”æ—¶é—´ > 2s
  - CPU > 90%
  - å†…å­˜ > 95%
  â†’ 5åˆ†é’Ÿå†…é€šçŸ¥

çº§åˆ«P2 (ä¸€èˆ¬):
  - ç£ç›˜ä½¿ç”¨ > 80%
  - æ…¢æŸ¥è¯¢å¢å¤š
  â†’ 30åˆ†é’Ÿå†…é€šçŸ¥
```

## ğŸ›¡ï¸ è´¨é‡é—¨ç¦

### ä»£ç å¿…é¡»é€šè¿‡

- âœ… æ‰€æœ‰ Lint æ£€æŸ¥é€šè¿‡
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%
- âœ… æ²¡æœ‰é«˜å±å®‰å…¨æ¼æ´
- âœ… ä»£ç å®¡æŸ¥ (Code Review) é€šè¿‡
- âœ… æ„å»ºæˆåŠŸ

### å‘å¸ƒåˆ°ç”Ÿäº§å¿…é¡»æ»¡è¶³

- âœ… åœ¨ Staging ç¯å¢ƒè¿è¡Œ > 24å°æ—¶
- âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡
- âœ… é›†æˆæµ‹è¯•é€šè¿‡
- âœ… æŠ€æœ¯è´Ÿè´£äººå®¡æ‰¹
- âœ… æœ‰å›æ»šé¢„æ¡ˆ

## ğŸ“ å»ºè®®çš„å·¥å…·é“¾

### CI/CD å¹³å°é€‰æ‹©

| å¹³å° | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| **GitHub Actions** | å…è´¹ã€é…ç½®ç®€å•ã€ä¸GitHubæ·±åº¦é›†æˆ | å…¬æœ‰äº‘ï¼Œä¸­å›½è®¿é—®æ…¢ | â­â­â­â­â­ |
| **GitLab CI** | åŠŸèƒ½å¼ºå¤§ã€å¯ç§æœ‰éƒ¨ç½² | é…ç½®å¤æ‚ | â­â­â­â­ |
| **Jenkins** | åŠŸèƒ½æœ€å…¨ã€æ’ä»¶ä¸°å¯Œ | ç»´æŠ¤æˆæœ¬é«˜ | â­â­â­ |
| **Drone** | è½»é‡çº§ã€DockeråŸç”Ÿ | ç¤¾åŒºè¾ƒå° | â­â­â­ |

### æ¨èå·¥å…·

```yaml
ä»£ç è´¨é‡:
  - ESLint (å‰ç«¯ä»£ç æ£€æŸ¥)
  - golangci-lint (åç«¯ä»£ç æ£€æŸ¥)
  - SonarQube (ä»£ç è´¨é‡åˆ†æ)

æµ‹è¯•:
  - Vitest (å‰ç«¯å•å…ƒæµ‹è¯•)
  - go test (åç«¯å•å…ƒæµ‹è¯•)
  - Postman/Newman (APIæµ‹è¯•)

é•œåƒ:
  - Docker (å®¹å™¨åŒ–)
  - Trivy (é•œåƒå®‰å…¨æ‰«æ)
  - Dive (é•œåƒåˆ†æä¼˜åŒ–)

éƒ¨ç½²:
  - Kubernetes (å®¹å™¨ç¼–æ’)
  - Helm (K8såŒ…ç®¡ç†)
  - ArgoCD (GitOpséƒ¨ç½²)

ç›‘æ§:
  - Prometheus (æŒ‡æ ‡æ”¶é›†)
  - Grafana (å¯è§†åŒ–)
  - Loki (æ—¥å¿—)
  - Jaeger (é“¾è·¯è¿½è¸ª)

é€šçŸ¥:
  - é’‰é’‰/ä¼ä¸šå¾®ä¿¡/Slack
  - é‚®ä»¶é€šçŸ¥
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–

```yaml
å‰ç«¯:
  - ä½¿ç”¨ pnpm ä»£æ›¿ npm (æ›´å¿«çš„ä¾èµ–å®‰è£…)
  - å¯ç”¨ Vite æ„å»ºç¼“å­˜
  - ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æº
  - ä»£ç åˆ†å‰² (Code Splitting)

åç«¯:
  - ä½¿ç”¨ Go ç¼–è¯‘ç¼“å­˜
  - å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯
  - ä½¿ç”¨å›½å†… Go Proxy

Docker:
  - ä½¿ç”¨ BuildKit åŠ é€Ÿæ„å»º
  - ä½¿ç”¨é•œåƒç¼“å­˜
  - æœ€å°åŒ–é•œåƒå±‚æ•°
```

### éƒ¨ç½²ä¼˜åŒ–

```yaml
Kubernetes:
  - HPA (æ°´å¹³è‡ªåŠ¨æ‰©ç¼©å®¹)
  - èµ„æºé™åˆ¶å’Œè¯·æ±‚
  - å°±ç»ªæ¢é’ˆå’Œå­˜æ´»æ¢é’ˆ
  - PodDisruptionBudget

æ•°æ®åº“:
  - ä¸»ä»å¤åˆ¶
  - è¯»å†™åˆ†ç¦»
  - è¿æ¥æ± ä¼˜åŒ–
```

## ğŸš¦ å‘å¸ƒæµç¨‹

### 1. åŠŸèƒ½å¼€å‘

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature develop

# å¼€å‘å®Œæˆå
git push origin feature/new-feature

# åˆ›å»º Pull Request åˆ° develop
# ç­‰å¾… CI é€šè¿‡å’Œä»£ç å®¡æŸ¥
# åˆå¹¶åˆ° develop
```

### 2. æµ‹è¯•å‘å¸ƒ

```bash
# ä» develop åˆ›å»º release åˆ†æ”¯
git checkout -b release/v1.0.0 develop

# æ¨é€è§¦å‘ CI/CD
git push origin release/v1.0.0

# è‡ªåŠ¨éƒ¨ç½²åˆ° Staging ç¯å¢ƒ
# æ‰§è¡Œæµ‹è¯•å’ŒéªŒè¯
```

### 3. ç”Ÿäº§å‘å¸ƒ

```bash
# æµ‹è¯•é€šè¿‡åï¼Œåˆå¹¶åˆ° main
git checkout main
git merge --no-ff release/v1.0.0
git tag v1.0.0
git push origin main --tags

# éœ€è¦äººå·¥å®¡æ‰¹
# å®¡æ‰¹é€šè¿‡åè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
```

### 4. ç´§æ€¥ä¿®å¤

```bash
# ä» main åˆ›å»º hotfix åˆ†æ”¯
git checkout -b hotfix/urgent-fix main

# ä¿®å¤å®Œæˆå
git checkout main
git merge --no-ff hotfix/urgent-fix
git tag v1.0.1

git checkout develop
git merge --no-ff hotfix/urgent-fix

git push origin main develop --tags
```

## ğŸ“‹ CI/CD é…ç½®æ¸…å•

æˆ‘å°†ä¸ºä½ åˆ›å»ºä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š

- [ ] `.github/workflows/ci.yml` - æŒç»­é›†æˆé…ç½®
- [ ] `.github/workflows/cd-dev.yml` - å¼€å‘ç¯å¢ƒéƒ¨ç½²
- [ ] `.github/workflows/cd-staging.yml` - æµ‹è¯•ç¯å¢ƒéƒ¨ç½²
- [ ] `.github/workflows/cd-prod.yml` - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ ] `.gitlab-ci.yml` - GitLab CI é…ç½®ï¼ˆå¤‡é€‰ï¼‰
- [ ] `scripts/build.sh` - æ„å»ºè„šæœ¬
- [ ] `scripts/deploy.sh` - éƒ¨ç½²è„šæœ¬
- [ ] `scripts/rollback.sh` - å›æ»šè„šæœ¬
- [ ] `deploy/kubernetes/*/kustomization.yaml` - Kustomize é…ç½®

## ğŸ¯ é¢„æœŸæ”¶ç›Š

### å¼€å‘æ•ˆç‡æå‡

- âš¡ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šå‡å°‘æ‰‹åŠ¨æµ‹è¯•æ—¶é—´ 70%
- âš¡ è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šéƒ¨ç½²æ—¶é—´ä» 1å°æ—¶ â†’ 5åˆ†é’Ÿ
- âš¡ å¿«é€Ÿåé¦ˆï¼šé—®é¢˜å‘ç°æ—¶é—´ä» å¤©çº§ â†’ åˆ†é’Ÿçº§

### ä»£ç è´¨é‡æå‡

- ğŸ“ˆ ä»£ç è¦†ç›–ç‡ï¼šä» 30% â†’ 60%+
- ğŸ› Bug å‘ç°ï¼šæå‰åˆ°å¼€å‘é˜¶æ®µ
- ğŸ”’ å®‰å…¨æ€§ï¼šè‡ªåŠ¨æ‰«æä¾èµ–æ¼æ´

### ç¨³å®šæ€§æå‡

- ğŸ›¡ï¸ æ•…éšœç‡ï¼šé™ä½ 80%
- â±ï¸ æ¢å¤æ—¶é—´ï¼šä» å°æ—¶çº§ â†’ åˆ†é’Ÿçº§
- ğŸ”„ å‘å¸ƒé¢‘ç‡ï¼šä» å‘¨çº§ â†’ æ—¥çº§

## ğŸ’° æˆæœ¬ä¼°ç®—

### GitHub Actions (æ¨è)

```
å…è´¹é¢åº¦:
- å…¬å¼€ä»“åº“: æ— é™åˆ¶
- ç§æœ‰ä»“åº“: 2000åˆ†é’Ÿ/æœˆ

é¢„ä¼°ä½¿ç”¨:
- æ¯æ¬¡ CI: 10åˆ†é’Ÿ
- æ¯å¤©æ¨é€: 20æ¬¡
- æœˆä½¿ç”¨: 10 Ã— 20 Ã— 30 = 6000åˆ†é’Ÿ

è´¹ç”¨: ~$50/æœˆ (è¶…å‡ºå…è´¹é¢åº¦éƒ¨åˆ†)
```

### è‡ªå»º Jenkins (å¤‡é€‰)

```
æœåŠ¡å™¨æˆæœ¬:
- 2æ ¸4G: Â¥300/æœˆ
- 4æ ¸8G: Â¥600/æœˆ (æ¨è)

äººåŠ›æˆæœ¬:
- è¿ç»´ 0.5äºº/æœˆ: Â¥10000/æœˆ

æ€»æˆæœ¬: ~Â¥10600/æœˆ
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. æ„å»ºç¼“å­˜

```dockerfile
# ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
FROM golang:alpine AS builder
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download  # â† ç¼“å­˜ä¾èµ–
COPY . .
RUN go build -o server
```

### 2. é•œåƒä¼˜åŒ–

```dockerfile
# ä½¿ç”¨æ›´å°çš„åŸºç¡€é•œåƒ
FROM alpine:latest  # 5MB
# è€Œä¸æ˜¯ FROM ubuntu:latest  # 72MB

# æ¸…ç†ä¸å¿…è¦çš„æ–‡ä»¶
RUN apk add --no-cache ca-certificates \
    && rm -rf /var/cache/apk/*
```

### 3. é…ç½®ç®¡ç†

```yaml
# ä½¿ç”¨ ConfigMap å’Œ Secret
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  database-host: mysql-service
  
---
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
data:
  database-password: base64-encoded-password
```

## ğŸ”— ä¸‹ä¸€æ­¥

æˆ‘å°†ä¸ºä½ åˆ›å»ºï¼š
1. âœ… GitHub Actions å®Œæ•´é…ç½®
2. âœ… æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
3. âœ… Kubernetes å®Œæ•´é…ç½®
4. âœ… ç¯å¢ƒå˜é‡ç®¡ç†æ–¹æ¡ˆ
5. âœ… ç›‘æ§å’Œæ—¥å¿—æ–¹æ¡ˆ

---

**å‡†å¤‡æ—¶é—´**: 2-3å¤©  
**ROI**: 3-6ä¸ªæœˆå›æœ¬  
**æ¨èåº¦**: â­â­â­â­â­

å‡†å¤‡å¥½å¼€å§‹å®æ–½äº†å—ï¼Ÿæˆ‘å°†ä¸ºä½ åˆ›å»ºæ‰€æœ‰å¿…è¦çš„é…ç½®æ–‡ä»¶ï¼



